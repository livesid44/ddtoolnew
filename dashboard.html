<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="BPO Process Discovery Platform - Dashboard">
    <title>Dashboard - BPO AI Platform</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="bootstrap-icons.css">
    <link rel="stylesheet" href="bpo-platform.css">
    <link rel="stylesheet" href="professional-enhancements.css">
    <!-- Chart.js for live data visualisation -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js" defer></script>
    <!-- MSAL.js for Azure AD authentication -->
    <script src="https://alcdn.msauth.net/browser/3.27.0/js/msal-browser.min.js" defer></script>
    <!-- SignalR client for real-time notifications -->
    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@8.0.7/dist/browser/signalr.min.js" defer></script>
</head>
<body class="dashboard-page">
    <!-- Header with Navigation -->
    <header class="platform-header">
        <div class="header-container">
            <div class="logo">
                <img src="images/aura.png" alt="AURA" style="height: 35px; width: auto;">
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="dashboard.html" class="active">Home</a></li>
                    <li><a href="workflow.html">Workflow</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="admin.html">Admin</a></li>
                    <li><a href="#settings">Settings</a></li>
                </ul>
            </nav>
            <div class="user-menu">
                <span class="user-name" id="userDisplayName">Loadingâ€¦</span>
                <button id="logoutBtn" onclick="location.href='login.html'" class="btn btn-sm" style="background: #e31837; border-color: #e31837;">Logout</button>
            </div>
        </div>
    </header>

    <div class="platform-layout">
        <!-- Sidebar -->
        <aside class="platform-sidebar" id="platformSidebar">
            <div class="sidebar-toggle" onclick="toggleSidebar()" style="cursor: pointer; padding: 10px 15px; color: #fff; text-align: center;">
                <span style="font-size: 1.5rem;"><i class="bi bi-list"></i></span>
            </div>
            <h3>Quick Links</h3>
            <nav class="sidebar-nav">
                <a href="workflow.html" class="sidebar-link">
                    <span class="icon"><i class="bi bi-diagram-3"></i></span>
                    <span>Workflow Engine</span>
                </a>
                <a href="intake.html" class="sidebar-link">
                    <span class="icon"><i class="bi bi-inbox-fill"></i></span>
                    <span>Intake</span>
                </a>
                <a href="upload.html" class="sidebar-link">
                    <span class="icon"><i class="bi bi-cloud-upload"></i></span>
                    <span>Upload Files</span>
                </a>
                <a href="analysis.html" class="sidebar-link">
                    <span class="icon"><i class="bi bi-cpu"></i></span>
                    <span>AI Analysis</span>
                </a>
                <a href="kanban.html" class="sidebar-link">
                    <span class="icon"><i class="bi bi-kanban"></i></span>
                    <span>Kanban Board</span>
                </a>
                <a href="admin.html" class="sidebar-link">
                    <span class="icon"><i class="bi bi-gear"></i></span>
                    <span>Admin Config</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="platform-main">
            <div class="page-header">
                <h1>Leadership Dashboard</h1>
                <p>Overview of BPO Process Discovery and Automation</p>
            </div>

            <!-- KPI Cards -->
            <section class="kpi-section">
                <div class="kpi-card">
                    <div class="kpi-icon"><i class="bi bi-graph-up"></i></div>
                    <div class="kpi-content">
                        <h3>Processes Discovered</h3>
                        <div class="kpi-value" id="kpi-processes-discovered">--</div>
                        <div class="kpi-change positive" id="kpi-status-breakdown"></div>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-icon"><i class="bi bi-hourglass-split"></i></div>
                    <div class="kpi-content">
                        <h3>Pending Reviews</h3>
                        <div class="kpi-value" id="kpi-pending-reviews">--</div>
                        <div class="kpi-change warning">Needs attention</div>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-icon"><i class="bi bi-shield-check"></i></div>
                    <div class="kpi-content">
                        <h3>Compliance Status</h3>
                        <div class="kpi-value" id="kpi-compliance-status">--</div>
                        <div class="kpi-change positive">Avg compliance score</div>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-icon"><i class="bi bi-lightning"></i></div>
                    <div class="kpi-content">
                        <h3>Automation Rate</h3>
                        <div class="kpi-value" id="kpi-automation-rate">--</div>
                        <div class="kpi-change positive">Avg automation score</div>
                    </div>
                </div>
            </section>

            <!-- Charts Section -->
            <section class="charts-section">
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Process Discovery Progress</h3>
                        <select class="chart-filter">
                            <option>By Status</option>
                        </select>
                    </div>
                    <div class="chart-placeholder" style="position:relative;height:200px;">
                        <canvas id="chartBar"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Completion Rate</h3>
                    </div>
                    <div class="chart-placeholder" style="position:relative;height:200px;">
                        <canvas id="chartDoughnut"></canvas>
                        <div id="donut-centre-value" style="position:absolute;top:50%;left:50%;
                             transform:translate(-50%,-60%);font-size:1.4rem;font-weight:700;
                             color:#294993;pointer-events:none;">--</div>
                    </div>
                </div>
            </section>

            <!-- Compliance Metrics -->
            <section class="metrics-section">
                <div class="chart-container full-width">
                    <div class="chart-header">
                        <h3>Compliance Metrics Timeline</h3>
                    </div>
                    <div class="chart-placeholder" style="position:relative;height:220px;">
                        <canvas id="chartLine"></canvas>
                    </div>
                </div>
            </section>

            <!-- Notifications Panel -->
            <section class="notifications-section">
                <div class="notifications-panel">
                    <div class="panel-header">
                        <h3>Recent Notifications</h3>
                        <button class="btn btn-sm">View All</button>
                    </div>
                    <div class="notifications-list">
                        <div class="notification-item new">
                            <div class="notification-icon"><i class="bi bi-bell"></i></div>
                            <div class="notification-content">
                                <h4>New Process Discovered</h4>
                                <p>Customer Service Call Handling process has been analyzed</p>
                                <span class="notification-time">5 minutes ago</span>
                            </div>
                        </div>
                        <div class="notification-item">
                            <div class="notification-icon"><i class="bi bi-exclamation-triangle"></i></div>
                            <div class="notification-content">
                                <h4>Review Required</h4>
                                <p>3 processes pending leadership approval</p>
                                <span class="notification-time">1 hour ago</span>
                            </div>
                        </div>
                        <div class="notification-item">
                            <div class="notification-icon"><i class="bi bi-check-circle"></i></div>
                            <div class="notification-content">
                                <h4>Compliance Check Complete</h4>
                                <p>All processes passed latest compliance audit</p>
                                <span class="notification-time">3 hours ago</span>
                            </div>
                        </div>
                        <div class="notification-item">
                            <div class="notification-icon"><i class="bi bi-upload"></i></div>
                            <div class="notification-content">
                                <h4>Files Uploaded</h4>
                                <p>12 new artifacts uploaded for review</p>
                                <span class="notification-time">5 hours ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
    <script src="bpo-platform.js"></script>
    <!-- Phase 3: API integration -->
    <script src="js/app-config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/dashboard-api.js"></script>
    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('platformSidebar');
            sidebar.classList.toggle('active');
        }
    </script>
</body>
</html>
